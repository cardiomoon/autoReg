<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="autoReg">
<title>Survival Analysis • autoReg</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Survival Analysis">
<meta property="og:description" content="autoReg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">autoReg</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Automatic_Regression_Modeling.html">Automatic Regression Modeling</a>
    <a class="dropdown-item" href="../articles/Bootstrap_Prediction.html">Bootstrap Simulation for model prediction</a>
    <a class="dropdown-item" href="../articles/Getting_started.html">Getting started</a>
    <a class="dropdown-item" href="../articles/Statiastical_test_in_gaze.html">Statistical tests in gaze</a>
    <a class="dropdown-item" href="../articles/Survival.html">Survival Analysis</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/cardiomoon/autoReg/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<link href="Survival_files/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="Survival_files/tabwid-1.1.3/tabwid.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Survival Analysis</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/cardiomoon/autoReg/blob/HEAD/vignettes/Survival.Rmd" class="external-link"><code>vignettes/Survival.Rmd</code></a></small>
      <div class="d-none name"><code>Survival.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="what-is-survival-analysis">What is survival analysis ?<a class="anchor" aria-label="anchor" href="#what-is-survival-analysis"></a>
</h2>
<p>Survival analysis is the study of survival times and of the factors
that influence them. Types of studies with survival outcomes include
clinical trials, prospective and retrospective observational studies,
and animal experiments. Examples of survival times include time from
birth until death, time from entry into a clinical trial until death or
disease progression, or time from birth to development of breast
cancer(that is, age of onset). The survival endpoint can also refer a
positive event. For example, one might be interested in the time from
entry into a clinical trial until tumor response.</p>
<p>Package autoReg provides a number of functions to make these analyses
easy to perform.</p>
<p>When writing package autoReg and this vignette, I was inspired from
package finalfit by Ewen Harrison.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install autoReg package on github.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"cardiomoon/autoReg"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="load-package">Load package<a class="anchor" aria-label="anchor" href="#load-package"></a>
</h2>
<p>To load the package, use library() function.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/cardiomoon/autoReg" class="external-link">autoReg</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/therneau/survival" class="external-link">survival</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="data-melanoma">Data <code>melanoma</code><a class="anchor" aria-label="anchor" href="#data-melanoma"></a>
</h2>
<p>The data melanoma included in the boot package is a data of 205
patients with malignant melanoma. Each patient had their tumor removed
by surgery at the Department of Plastic Surgery, University Hospital of
Odense, Denmark during the period 1962 to 1977. The surgery consisted of
complete removal of the tumor together with about 2.5cm of the
surrounding skin. Among the measurements taken were the thickness of the
tumor and whether it was ulcerated or not. These are thought to be
important prognostic variables in that patients with a thick and/or
ulcerated tumor have an increased chance of death from melanoma.
Patients were followed until the end of 1977.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(melanoma,<span class="at">package=</span><span class="st">"boot"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gaze</span>(melanoma)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>———————————————————————————————————————</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>   name      levels         stats      </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>———————————————————————————————————————</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>time       Mean ± SD    <span class="fl">2152.8</span> ± <span class="fl">1122.1</span> </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>status     Mean ± SD          <span class="fl">1.8</span> ± <span class="fl">0.6</span> </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>sex        Mean ± SD          <span class="fl">0.4</span> ± <span class="fl">0.5</span> </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>age        Mean ± SD        <span class="fl">52.5</span> ± <span class="fl">16.7</span> </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>year       Mean ± SD       <span class="fl">1969.9</span> ± <span class="fl">2.6</span> </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>thickness  Mean ± SD          <span class="fl">2.9</span> ± <span class="fl">3.0</span> </span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>ulcer      Mean ± SD          <span class="fl">0.4</span> ± <span class="fl">0.5</span> </span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>———————————————————————————————————————</span></code></pre></div>
<p>The patient status at the end of study was coded in status
variable.</p>
<ul>
<li>1 indicates that they had died from melanoma</li>
<li>2 indicates that they were still alive</li>
<li>3 indicates that they had died from causes unrelated to their
melanoma.</li>
</ul>
<p>There are three options for coding this.</p>
<ul>
<li>Overall survival: considering all-cause mortality, comparing 2
(alive) with 1 (died melanoma)/3 (died other) by logical expression
status!=2 (e.g. status is not equal to 2)</li>
<li>Cause-specific survival: considering disease-specific mortality
comparing 2 (alive)/3 (died other) with 1 (died melanoma) by status==1
(e.g. status is equal to 1 )</li>
<li>Competing risks: comparing 2 (alive) with 1 (died melanoma)
accounting for 3 (died other); So we will make a new variable
<code>statusCRR</code>
</li>
</ul>
<p>The <code>sex</code> variable in melanoma is coded as 0=female and
1=male. The <code>ulcer</code> variable is coded as 1=present and 2=
absent. It is possible to use this variables during analysis, but we
change these variables to factor with proper labels(just for aesthetic
purpose).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">melanoma</span><span class="op">$</span><span class="va">status1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">melanoma</span><span class="op">$</span><span class="va">status</span><span class="op">==</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">melanoma</span><span class="op">$</span><span class="va">status</span><span class="op">==</span><span class="fl">2</span>,<span class="fl">0</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">melanoma</span><span class="op">$</span><span class="va">statusCRR</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">melanoma</span><span class="op">$</span><span class="va">status1</span>,labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"survived"</span>,<span class="st">"melanoma"</span>,<span class="st">"other cause"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">melanoma</span><span class="op">$</span><span class="va">sex</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">melanoma</span><span class="op">$</span><span class="va">sex</span>,labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Female"</span>,<span class="st">"Male"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">melanoma</span><span class="op">$</span><span class="va">ulcer</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">melanoma</span><span class="op">$</span><span class="va">ulcer</span>,labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Absent"</span>,<span class="st">"Present"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gaze</span>(melanoma,<span class="at">show.n=</span><span class="cn">TRUE</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>———————————————————————————————————————————————————</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>   name       levels      N        stats        n  </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>———————————————————————————————————————————————————</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>time       Mean ± SD      <span class="dv">205</span>  <span class="fl">2152.8</span> ± <span class="fl">1122.1</span>  <span class="dv">205</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>status     Mean ± SD      <span class="dv">205</span>        <span class="fl">1.8</span> ± <span class="fl">0.6</span>  <span class="dv">205</span> </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>sex        Female         <span class="dv">205</span>      <span class="dv">126</span> (<span class="fl">61.5</span>%)  <span class="dv">126</span> </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>           Male                     <span class="dv">79</span> (<span class="fl">38.5</span>%)   <span class="dv">79</span> </span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>age        Mean ± SD      <span class="dv">205</span>      <span class="fl">52.5</span> ± <span class="fl">16.7</span>  <span class="dv">205</span> </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>year       Mean ± SD      <span class="dv">205</span>     <span class="fl">1969.9</span> ± <span class="fl">2.6</span>  <span class="dv">205</span> </span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>thickness  Mean ± SD      <span class="dv">205</span>        <span class="fl">2.9</span> ± <span class="fl">3.0</span>  <span class="dv">205</span> </span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>ulcer      Absent         <span class="dv">205</span>      <span class="dv">115</span> (<span class="fl">56.1</span>%)  <span class="dv">115</span> </span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>           Present                  <span class="dv">90</span> (<span class="fl">43.9</span>%)   <span class="dv">90</span> </span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>status1    Mean ± SD      <span class="dv">205</span>        <span class="fl">0.4</span> ± <span class="fl">0.6</span>  <span class="dv">205</span> </span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>statusCRR  survived       <span class="dv">205</span>      <span class="dv">134</span> (<span class="fl">65.4</span>%)  <span class="dv">134</span> </span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>           melanoma                 <span class="dv">57</span> (<span class="fl">27.8</span>%)   <span class="dv">57</span> </span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>           other cause               <span class="dv">14</span> (<span class="fl">6.8</span>%)   <span class="dv">14</span> </span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>———————————————————————————————————————————————————</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="survival-analysis-for-whole-group">Survival analysis for whole group<a class="anchor" aria-label="anchor" href="#survival-analysis-for-whole-group"></a>
</h2>
<p>You can estimate survival in whole group with survfit() function in
the survival package.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>fit<span class="ot">=</span><span class="fu">survfit</span>(<span class="fu">Surv</span>(time<span class="sc">/</span><span class="fl">365.25</span>,status<span class="sc">!=</span><span class="dv">2</span>)<span class="sc">~</span><span class="dv">1</span>,<span class="at">data=</span>melanoma)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>fit</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>Call<span class="sc">:</span> <span class="fu">survfit</span>(<span class="at">formula =</span> <span class="fu">Surv</span>(time<span class="sc">/</span><span class="fl">365.25</span>, status <span class="sc">!=</span> <span class="dv">2</span>) <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> melanoma)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>       n events median <span class="fl">0.95</span>LCL <span class="fl">0.95</span>UCL</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="dv">205</span>     <span class="dv">71</span>     <span class="cn">NA</span>    <span class="fl">9.14</span>      <span class="cn">NA</span></span></code></pre></div>
<div class="section level3">
<h3 id="life-table">Life table<a class="anchor" aria-label="anchor" href="#life-table"></a>
</h3>
<p>A life table is the tabular form of a KM plot. It shows survival as a
proportion, together with confidence limits.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit,<span class="at">times=</span><span class="dv">0</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>Call<span class="sc">:</span> <span class="fu">survfit</span>(<span class="at">formula =</span> <span class="fu">Surv</span>(time<span class="sc">/</span><span class="fl">365.25</span>, status <span class="sc">!=</span> <span class="dv">2</span>) <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> melanoma)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a> time n.risk n.event survival std.err lower <span class="dv">95</span><span class="sc">% CI upper 95%</span> CI</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="dv">0</span>    <span class="dv">205</span>       <span class="dv">0</span>    <span class="fl">1.000</span>  <span class="fl">0.0000</span>        <span class="fl">1.000</span>        <span class="fl">1.000</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span>    <span class="dv">193</span>      <span class="dv">11</span>    <span class="fl">0.946</span>  <span class="fl">0.0158</span>        <span class="fl">0.916</span>        <span class="fl">0.978</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2</span>    <span class="dv">183</span>      <span class="dv">10</span>    <span class="fl">0.897</span>  <span class="fl">0.0213</span>        <span class="fl">0.856</span>        <span class="fl">0.940</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>    <span class="dv">167</span>      <span class="dv">16</span>    <span class="fl">0.819</span>  <span class="fl">0.0270</span>        <span class="fl">0.767</span>        <span class="fl">0.873</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="dv">4</span>    <span class="dv">160</span>       <span class="dv">7</span>    <span class="fl">0.784</span>  <span class="fl">0.0288</span>        <span class="fl">0.730</span>        <span class="fl">0.843</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="dv">5</span>    <span class="dv">122</span>      <span class="dv">10</span>    <span class="fl">0.732</span>  <span class="fl">0.0313</span>        <span class="fl">0.673</span>        <span class="fl">0.796</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="kaplan-meier-plot">Kaplan-Meier Plot<a class="anchor" aria-label="anchor" href="#kaplan-meier-plot"></a>
</h3>
<p>You can plot survival curves using the ggsurvplot() in the survminer
package. There are numerous options available on the help page.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rpkgs.datanovia.com/survminer/index.html" class="external-link">survminer</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/survminer/man/ggsurvplot.html" class="external-link">ggsurvplot</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></code></pre></div>
<p><img src="Survival_files/figure-html/unnamed-chunk-9-1.png" width="576"></p>
</div>
<div class="section level3">
<h3 id="cox-proportional-hazard-model">Cox-proportional hazard model<a class="anchor" aria-label="anchor" href="#cox-proportional-hazard-model"></a>
</h3>
<p>The coxph() function in the survival package fits a Cox proportional
hazards regression model. Time dependent variables, time dependent
strata, multiple events per subject, and other extensions are
incorporated using the counting process formulation of Andersen and
Gill.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/coxph.html" class="external-link">coxph</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">status</span><span class="op">!=</span><span class="fl">2</span><span class="op">)</span><span class="op">~</span><span class="va">age</span><span class="op">+</span><span class="va">sex</span><span class="op">+</span><span class="va">thickness</span><span class="op">+</span><span class="va">ulcer</span>,data<span class="op">=</span><span class="va">melanoma</span><span class="op">)</span></span></code></pre></div>
<p>You can summarize the results of coxph() with autoReg() function.
With a list of univariable model, you can select potentially significant
explanatory variable(p value below 0.2 for example). The autoReg()
function automatically select from univariable model with a given p
value threshold(default value is 0.2). If you want to use all the
explanatory variables in the multivariable model, set the threshold
1.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">=</span><span class="fu"><a href="../reference/autoReg.html">autoReg</a></span><span class="op">(</span><span class="va">fit</span>,uni<span class="op">=</span><span class="cn">TRUE</span>,threshold<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/myft.html">myft</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="tabwid">
<style>.cl-11e437e2{}.cl-11dda26a{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-11dda274{font-family:'DejaVu Sans';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-11e08304{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-11e0830e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-11e0830f{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-11e08318{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-11e096d2{width:0.941in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-11e096dc{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-11e096e6{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-11e096e7{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-11e096f0{width:0.941in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-11e096fa{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-11e096fb{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-11e096fc{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-11e09704{width:0.941in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-11e09705{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-11e0970e{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-11e0970f{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-11e09710{width:0.941in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-11e09718{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-11e09719{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-11e0971a{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-11e09722{width:0.941in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-11e0972c{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-11e0972d{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-11e0972e{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table data-quarto-disable-processing="true" class="table cl-11e437e2">
<thead><tr style="overflow-wrap:break-word;">
<th colspan="2" class="cl-11e096d2"><p class="cl-11e08304"><span class="cl-11dda26a">Dependent: Surv(time, status != 2)</span></p></th>
<th class="cl-11e096e6"><p class="cl-11e08304"><span class="cl-11dda26a">all</span></p></th>
<th class="cl-11e096e7"><p class="cl-11e08304"><span class="cl-11dda26a">HR (univariable)</span></p></th>
<th class="cl-11e096e7"><p class="cl-11e08304"><span class="cl-11dda26a">HR (multivariable)</span></p></th>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-11e096f0"><p class="cl-11e0830e"><span class="cl-11dda274">age</span></p></td>
<td class="cl-11e096fa"><p class="cl-11e0830f"><span class="cl-11dda274">Mean ± SD</span></p></td>
<td class="cl-11e096fb"><p class="cl-11e0830f"><span class="cl-11dda274">52.5 ± 16.7</span></p></td>
<td class="cl-11e096fc"><p class="cl-11e0830f"><span class="cl-11dda274">1.03 (1.01-1.05, p&lt;.001)</span></p></td>
<td class="cl-11e096fc"><p class="cl-11e0830f"><span class="cl-11dda274">1.02 (1.01-1.04, p=.005)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-11e09704"><p class="cl-11e0830e"><span class="cl-11dda274">sex</span></p></td>
<td class="cl-11e09705"><p class="cl-11e0830f"><span class="cl-11dda274">Female</span></p></td>
<td class="cl-11e0970e"><p class="cl-11e0830f"><span class="cl-11dda274">126 (61.5%)</span></p></td>
<td class="cl-11e0970f"><p class="cl-11e0830f"><span class="cl-11dda274"></span></p></td>
<td class="cl-11e0970f"><p class="cl-11e0830f"><span class="cl-11dda274"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-11e096f0"><p class="cl-11e0830e"><span class="cl-11dda274"></span></p></td>
<td class="cl-11e096fa"><p class="cl-11e0830f"><span class="cl-11dda274">Male</span></p></td>
<td class="cl-11e096fb"><p class="cl-11e0830f"><span class="cl-11dda274">79 (38.5%)</span></p></td>
<td class="cl-11e096fc"><p class="cl-11e0830f"><span class="cl-11dda274">1.93 (1.21-3.07, p=.006)</span></p></td>
<td class="cl-11e096fc"><p class="cl-11e0830f"><span class="cl-11dda274">1.51 (0.94-2.42, p=.085)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-11e096f0"><p class="cl-11e0830e"><span class="cl-11dda274">thickness</span></p></td>
<td class="cl-11e096fa"><p class="cl-11e0830f"><span class="cl-11dda274">Mean ± SD</span></p></td>
<td class="cl-11e096fb"><p class="cl-11e0830f"><span class="cl-11dda274">2.9 ± 3.0</span></p></td>
<td class="cl-11e096fc"><p class="cl-11e0830f"><span class="cl-11dda274">1.16 (1.10-1.23, p&lt;.001)</span></p></td>
<td class="cl-11e096fc"><p class="cl-11e0830f"><span class="cl-11dda274">1.10 (1.03-1.18, p=.004)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-11e09704"><p class="cl-11e0830e"><span class="cl-11dda274">ulcer</span></p></td>
<td class="cl-11e09705"><p class="cl-11e0830f"><span class="cl-11dda274">Absent</span></p></td>
<td class="cl-11e0970e"><p class="cl-11e0830f"><span class="cl-11dda274">115 (56.1%)</span></p></td>
<td class="cl-11e0970f"><p class="cl-11e0830f"><span class="cl-11dda274"></span></p></td>
<td class="cl-11e0970f"><p class="cl-11e0830f"><span class="cl-11dda274"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-11e09710"><p class="cl-11e0830e"><span class="cl-11dda274"></span></p></td>
<td class="cl-11e09718"><p class="cl-11e0830f"><span class="cl-11dda274">Present</span></p></td>
<td class="cl-11e09719"><p class="cl-11e0830f"><span class="cl-11dda274">90 (43.9%)</span></p></td>
<td class="cl-11e0971a"><p class="cl-11e0830f"><span class="cl-11dda274">3.52 (2.14-5.80, p&lt;.001)</span></p></td>
<td class="cl-11e0971a"><p class="cl-11e0830f"><span class="cl-11dda274">2.59 (1.53-4.38, p&lt;.001)</span></p></td>
</tr>
</tbody>
<tfoot><tr style="overflow-wrap:break-word;"><td colspan="5" class="cl-11e09722"><p class="cl-11e08318"><span class="cl-11dda26a">n=205, events=71, Likelihood ratio test=47.89 on 4 df(p&lt;.001)</span></p></td></tr></tfoot>
</table>
</div>
<p>If you want, you can decorate your table as follows:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="va">name</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Age(years)"</span>,<span class="st">"Sex"</span>,<span class="st">""</span>,<span class="st">"Tumor thickness (mm)"</span>,<span class="st">"Ulceration"</span>,<span class="st">""</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">=</span><span class="st">"Overall Survival"</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/myft.html">myft</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="tabwid">
<style>.cl-120a2e02{}.cl-120416a2{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-120416ac{font-family:'DejaVu Sans';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-1206c0d2{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-1206c0dc{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-1206c0dd{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-1206c0e6{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-1206d20c{width:1.859in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1206d216{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1206d220{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1206d221{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1206d22a{width:1.859in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1206d22b{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1206d234{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1206d235{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1206d23e{width:1.859in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1206d248{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1206d249{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1206d252{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1206d253{width:1.859in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1206d254{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1206d25c{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1206d25d{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1206d266{width:1.859in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1206d270{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1206d271{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1206d27a{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table data-quarto-disable-processing="true" class="table cl-120a2e02">
<thead><tr style="overflow-wrap:break-word;">
<th colspan="2" class="cl-1206d20c"><p class="cl-1206c0d2"><span class="cl-120416a2">Dependent: Surv(time, status != 2)</span></p></th>
<th class="cl-1206d220"><p class="cl-1206c0d2"><span class="cl-120416a2">all</span></p></th>
<th class="cl-1206d221"><p class="cl-1206c0d2"><span class="cl-120416a2">HR (univariable)</span></p></th>
<th class="cl-1206d221"><p class="cl-1206c0d2"><span class="cl-120416a2">HR (multivariable)</span></p></th>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-1206d22a"><p class="cl-1206c0dc"><span class="cl-120416ac">Age(years)</span></p></td>
<td class="cl-1206d22b"><p class="cl-1206c0dd"><span class="cl-120416ac">Mean ± SD</span></p></td>
<td class="cl-1206d234"><p class="cl-1206c0dd"><span class="cl-120416ac">52.5 ± 16.7</span></p></td>
<td class="cl-1206d235"><p class="cl-1206c0dd"><span class="cl-120416ac">1.03 (1.01-1.05, p&lt;.001)</span></p></td>
<td class="cl-1206d235"><p class="cl-1206c0dd"><span class="cl-120416ac">1.02 (1.01-1.04, p=.005)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-1206d23e"><p class="cl-1206c0dc"><span class="cl-120416ac">Sex</span></p></td>
<td class="cl-1206d248"><p class="cl-1206c0dd"><span class="cl-120416ac">Female</span></p></td>
<td class="cl-1206d249"><p class="cl-1206c0dd"><span class="cl-120416ac">126 (61.5%)</span></p></td>
<td class="cl-1206d252"><p class="cl-1206c0dd"><span class="cl-120416ac"></span></p></td>
<td class="cl-1206d252"><p class="cl-1206c0dd"><span class="cl-120416ac"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-1206d22a"><p class="cl-1206c0dc"><span class="cl-120416ac"></span></p></td>
<td class="cl-1206d22b"><p class="cl-1206c0dd"><span class="cl-120416ac">Male</span></p></td>
<td class="cl-1206d234"><p class="cl-1206c0dd"><span class="cl-120416ac">79 (38.5%)</span></p></td>
<td class="cl-1206d235"><p class="cl-1206c0dd"><span class="cl-120416ac">1.93 (1.21-3.07, p=.006)</span></p></td>
<td class="cl-1206d235"><p class="cl-1206c0dd"><span class="cl-120416ac">1.51 (0.94-2.42, p=.085)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-1206d22a"><p class="cl-1206c0dc"><span class="cl-120416ac">Tumor thickness (mm)</span></p></td>
<td class="cl-1206d22b"><p class="cl-1206c0dd"><span class="cl-120416ac">Mean ± SD</span></p></td>
<td class="cl-1206d234"><p class="cl-1206c0dd"><span class="cl-120416ac">2.9 ± 3.0</span></p></td>
<td class="cl-1206d235"><p class="cl-1206c0dd"><span class="cl-120416ac">1.16 (1.10-1.23, p&lt;.001)</span></p></td>
<td class="cl-1206d235"><p class="cl-1206c0dd"><span class="cl-120416ac">1.10 (1.03-1.18, p=.004)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-1206d23e"><p class="cl-1206c0dc"><span class="cl-120416ac">Ulceration</span></p></td>
<td class="cl-1206d248"><p class="cl-1206c0dd"><span class="cl-120416ac">Absent</span></p></td>
<td class="cl-1206d249"><p class="cl-1206c0dd"><span class="cl-120416ac">115 (56.1%)</span></p></td>
<td class="cl-1206d252"><p class="cl-1206c0dd"><span class="cl-120416ac"></span></p></td>
<td class="cl-1206d252"><p class="cl-1206c0dd"><span class="cl-120416ac"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-1206d253"><p class="cl-1206c0dc"><span class="cl-120416ac"></span></p></td>
<td class="cl-1206d254"><p class="cl-1206c0dd"><span class="cl-120416ac">Present</span></p></td>
<td class="cl-1206d25c"><p class="cl-1206c0dd"><span class="cl-120416ac">90 (43.9%)</span></p></td>
<td class="cl-1206d25d"><p class="cl-1206c0dd"><span class="cl-120416ac">3.52 (2.14-5.80, p&lt;.001)</span></p></td>
<td class="cl-1206d25d"><p class="cl-1206c0dd"><span class="cl-120416ac">2.59 (1.53-4.38, p&lt;.001)</span></p></td>
</tr>
</tbody>
<tfoot><tr style="overflow-wrap:break-word;"><td colspan="5" class="cl-1206d266"><p class="cl-1206c0e6"><span class="cl-120416a2">n=205, events=71, Likelihood ratio test=47.89 on 4 df(p&lt;.001)</span></p></td></tr></tfoot>
</table>
</div>
<div class="section level4">
<h4 id="hazard-ratio-plot-modelplot">Hazard ratio plot : modelPlot()<a class="anchor" aria-label="anchor" href="#hazard-ratio-plot-modelplot"></a>
</h4>
<p>You can draw hazard ratio plot</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/modelPlot.html">modelPlot</a></span><span class="op">(</span><span class="va">fit</span>,uni<span class="op">=</span><span class="cn">TRUE</span>, threshold<span class="op">=</span><span class="fl">1</span>,show.ref<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="Survival_files/figure-html/unnamed-chunk-13-1.png" width="768"></p>
<p>If you want to add another model summary to the table, the
addFitSummary() can do this.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">final</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/coxph.html" class="external-link">coxph</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">status</span><span class="op">!=</span><span class="fl">2</span><span class="op">)</span><span class="op">~</span><span class="va">age</span><span class="op">+</span><span class="va">thickness</span><span class="op">+</span><span class="va">ulcer</span>,data<span class="op">=</span><span class="va">melanoma</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">=</span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/addFitSummary.html">addFitSummary</a></span><span class="op">(</span><span class="va">final</span>,statsname<span class="op">=</span><span class="st">"HR (final)"</span><span class="op">)</span> </span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/myft.html">myft</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="tabwid">
<style>.cl-12a5d398{}.cl-129fa874{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-129fa888{font-family:'DejaVu Sans';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-12a25ea2{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-12a25eb6{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-12a25eb7{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-12a25ec0{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-12a26ff0{width:1.859in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12a26ffa{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12a27004{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12a27005{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12a2700e{width:1.859in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12a2700f{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12a27018{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12a27019{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12a27022{width:1.859in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12a27023{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12a27024{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12a2702c{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12a2702d{width:1.859in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12a2702e{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12a27036{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12a27037{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12a27040{width:1.859in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12a2704a{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12a27054{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12a27055{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table data-quarto-disable-processing="true" class="table cl-12a5d398">
<thead><tr style="overflow-wrap:break-word;">
<th colspan="2" class="cl-12a26ff0"><p class="cl-12a25ea2"><span class="cl-129fa874">Dependent: Surv(time, status != 2)</span></p></th>
<th class="cl-12a27004"><p class="cl-12a25ea2"><span class="cl-129fa874">all</span></p></th>
<th class="cl-12a27005"><p class="cl-12a25ea2"><span class="cl-129fa874">HR (univariable)</span></p></th>
<th class="cl-12a27005"><p class="cl-12a25ea2"><span class="cl-129fa874">HR (multivariable)</span></p></th>
<th class="cl-12a27005"><p class="cl-12a25ea2"><span class="cl-129fa874">HR (final)</span></p></th>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-12a2700e"><p class="cl-12a25eb6"><span class="cl-129fa888">Age(years)</span></p></td>
<td class="cl-12a2700f"><p class="cl-12a25eb7"><span class="cl-129fa888">Mean ± SD</span></p></td>
<td class="cl-12a27018"><p class="cl-12a25eb7"><span class="cl-129fa888">52.5 ± 16.7</span></p></td>
<td class="cl-12a27019"><p class="cl-12a25eb7"><span class="cl-129fa888">1.03 (1.01-1.05, p&lt;.001)</span></p></td>
<td class="cl-12a27019"><p class="cl-12a25eb7"><span class="cl-129fa888">1.02 (1.01-1.04, p=.005)</span></p></td>
<td class="cl-12a27019"><p class="cl-12a25eb7"><span class="cl-129fa888">1.02 (1.01-1.04, p=.003)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-12a27022"><p class="cl-12a25eb6"><span class="cl-129fa888">Sex</span></p></td>
<td class="cl-12a27023"><p class="cl-12a25eb7"><span class="cl-129fa888">Female</span></p></td>
<td class="cl-12a27024"><p class="cl-12a25eb7"><span class="cl-129fa888">126 (61.5%)</span></p></td>
<td class="cl-12a2702c"><p class="cl-12a25eb7"><span class="cl-129fa888"></span></p></td>
<td class="cl-12a2702c"><p class="cl-12a25eb7"><span class="cl-129fa888"></span></p></td>
<td class="cl-12a2702c"><p class="cl-12a25eb7"><span class="cl-129fa888"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-12a2700e"><p class="cl-12a25eb6"><span class="cl-129fa888"></span></p></td>
<td class="cl-12a2700f"><p class="cl-12a25eb7"><span class="cl-129fa888">Male</span></p></td>
<td class="cl-12a27018"><p class="cl-12a25eb7"><span class="cl-129fa888">79 (38.5%)</span></p></td>
<td class="cl-12a27019"><p class="cl-12a25eb7"><span class="cl-129fa888">1.93 (1.21-3.07, p=.006)</span></p></td>
<td class="cl-12a27019"><p class="cl-12a25eb7"><span class="cl-129fa888">1.51 (0.94-2.42, p=.085)</span></p></td>
<td class="cl-12a27019"><p class="cl-12a25eb7"><span class="cl-129fa888"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-12a2700e"><p class="cl-12a25eb6"><span class="cl-129fa888">Tumor thickness (mm)</span></p></td>
<td class="cl-12a2700f"><p class="cl-12a25eb7"><span class="cl-129fa888">Mean ± SD</span></p></td>
<td class="cl-12a27018"><p class="cl-12a25eb7"><span class="cl-129fa888">2.9 ± 3.0</span></p></td>
<td class="cl-12a27019"><p class="cl-12a25eb7"><span class="cl-129fa888">1.16 (1.10-1.23, p&lt;.001)</span></p></td>
<td class="cl-12a27019"><p class="cl-12a25eb7"><span class="cl-129fa888">1.10 (1.03-1.18, p=.004)</span></p></td>
<td class="cl-12a27019"><p class="cl-12a25eb7"><span class="cl-129fa888">1.10 (1.03-1.18, p=.003)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-12a27022"><p class="cl-12a25eb6"><span class="cl-129fa888">Ulceration</span></p></td>
<td class="cl-12a27023"><p class="cl-12a25eb7"><span class="cl-129fa888">Absent</span></p></td>
<td class="cl-12a27024"><p class="cl-12a25eb7"><span class="cl-129fa888">115 (56.1%)</span></p></td>
<td class="cl-12a2702c"><p class="cl-12a25eb7"><span class="cl-129fa888"></span></p></td>
<td class="cl-12a2702c"><p class="cl-12a25eb7"><span class="cl-129fa888"></span></p></td>
<td class="cl-12a2702c"><p class="cl-12a25eb7"><span class="cl-129fa888"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-12a2702d"><p class="cl-12a25eb6"><span class="cl-129fa888"></span></p></td>
<td class="cl-12a2702e"><p class="cl-12a25eb7"><span class="cl-129fa888">Present</span></p></td>
<td class="cl-12a27036"><p class="cl-12a25eb7"><span class="cl-129fa888">90 (43.9%)</span></p></td>
<td class="cl-12a27037"><p class="cl-12a25eb7"><span class="cl-129fa888">3.52 (2.14-5.80, p&lt;.001)</span></p></td>
<td class="cl-12a27037"><p class="cl-12a25eb7"><span class="cl-129fa888">2.59 (1.53-4.38, p&lt;.001)</span></p></td>
<td class="cl-12a27037"><p class="cl-12a25eb7"><span class="cl-129fa888">2.72 (1.61-4.57, p&lt;.001)</span></p></td>
</tr>
</tbody>
<tfoot><tr style="overflow-wrap:break-word;"><td colspan="6" class="cl-12a27040"><p class="cl-12a25ec0"><span class="cl-129fa874">n=205, events=71, Likelihood ratio test=47.89 on 4 df(p&lt;.001)</span></p></td></tr></tfoot>
</table>
</div>
</div>
<div class="section level4">
<h4 id="testing-for-proportional-hazards">Testing for proportional hazards<a class="anchor" aria-label="anchor" href="#testing-for-proportional-hazards"></a>
</h4>
<p>An assumption of Cox proportional hazard regression is that the
hazard (think risk) associated with a particular variable does not
change over time. For example, is the magnitude of the increase in risk
of death associated with tumor ulceration the same in the early
post-operative period as it is in later years?</p>
<p>The cox.zph() function from the survival package allows us to test
this assumption for each variable. The plot of scaled Schoenfeld
residuals should be a horizontal line. The included hypothesis test
identifies whether the gradient differs from zero for each variable. No
variable significantly differs from zero at the 5% significance
level.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>result<span class="ot">=</span><span class="fu">cox.zph</span>(fit)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>result</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>          chisq df     p</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>age       <span class="fl">1.610</span>  <span class="dv">1</span> <span class="fl">0.205</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>sex       <span class="fl">0.478</span>  <span class="dv">1</span> <span class="fl">0.489</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>thickness <span class="fl">3.124</span>  <span class="dv">1</span> <span class="fl">0.077</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>ulcer     <span class="fl">4.633</span>  <span class="dv">1</span> <span class="fl">0.031</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>GLOBAL    <span class="fl">7.706</span>  <span class="dv">4</span> <span class="fl">0.103</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/coxzphplot.html">coxzphplot</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span></code></pre></div>
<p><img src="Survival_files/figure-html/unnamed-chunk-16-1.png" width="768"></p>
</div>
</div>
<div class="section level3">
<h3 id="disease-specific-survival">Disease-specific survival<a class="anchor" aria-label="anchor" href="#disease-specific-survival"></a>
</h3>
<p>You can analyze disease specific survival and make a
publication-ready table.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/coxph.html" class="external-link">coxph</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">status</span><span class="op">==</span><span class="fl">1</span><span class="op">)</span><span class="op">~</span><span class="va">age</span><span class="op">+</span><span class="va">sex</span><span class="op">+</span><span class="va">thickness</span><span class="op">+</span><span class="va">ulcer</span>,data<span class="op">=</span><span class="va">melanoma</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/autoReg.html">autoReg</a></span><span class="op">(</span><span class="va">fit</span>,uni<span class="op">=</span><span class="cn">TRUE</span>,threshold<span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/myft.html">myft</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="tabwid">
<style>.cl-133a8d26{}.cl-1334605e{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-13346072{font-family:'DejaVu Sans';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-13371a4c{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-13371a56{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-13371a60{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-13371a61{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-13372bea{width:0.941in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13372bf4{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13372bfe{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13372bff{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13372c08{width:0.941in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13372c09{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13372c12{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13372c13{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13372c14{width:0.941in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13372c1c{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13372c1d{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13372c1e{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13372c26{width:0.941in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13372c27{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13372c30{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13372c31{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13372c32{width:0.941in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13372c3a{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13372c3b{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13372c44{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table data-quarto-disable-processing="true" class="table cl-133a8d26">
<thead><tr style="overflow-wrap:break-word;">
<th colspan="2" class="cl-13372bea"><p class="cl-13371a4c"><span class="cl-1334605e">Dependent: Surv(time, status == 1)</span></p></th>
<th class="cl-13372bfe"><p class="cl-13371a4c"><span class="cl-1334605e">all</span></p></th>
<th class="cl-13372bff"><p class="cl-13371a4c"><span class="cl-1334605e">HR (univariable)</span></p></th>
<th class="cl-13372bff"><p class="cl-13371a4c"><span class="cl-1334605e">HR (multivariable)</span></p></th>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-13372c08"><p class="cl-13371a56"><span class="cl-13346072">age</span></p></td>
<td class="cl-13372c09"><p class="cl-13371a60"><span class="cl-13346072">Mean ± SD</span></p></td>
<td class="cl-13372c12"><p class="cl-13371a60"><span class="cl-13346072">52.5 ± 16.7</span></p></td>
<td class="cl-13372c13"><p class="cl-13371a60"><span class="cl-13346072">1.02 (1.00-1.04, p=.028)</span></p></td>
<td class="cl-13372c13"><p class="cl-13371a60"><span class="cl-13346072">1.01 (1.00-1.03, p=.141)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-13372c14"><p class="cl-13371a56"><span class="cl-13346072">sex</span></p></td>
<td class="cl-13372c1c"><p class="cl-13371a60"><span class="cl-13346072">Female</span></p></td>
<td class="cl-13372c1d"><p class="cl-13371a60"><span class="cl-13346072">126 (61.5%)</span></p></td>
<td class="cl-13372c1e"><p class="cl-13371a60"><span class="cl-13346072"></span></p></td>
<td class="cl-13372c1e"><p class="cl-13371a60"><span class="cl-13346072"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-13372c08"><p class="cl-13371a56"><span class="cl-13346072"></span></p></td>
<td class="cl-13372c09"><p class="cl-13371a60"><span class="cl-13346072">Male</span></p></td>
<td class="cl-13372c12"><p class="cl-13371a60"><span class="cl-13346072">79 (38.5%)</span></p></td>
<td class="cl-13372c13"><p class="cl-13371a60"><span class="cl-13346072">1.94 (1.15-3.26, p=.013)</span></p></td>
<td class="cl-13372c13"><p class="cl-13371a60"><span class="cl-13346072">1.54 (0.91-2.60, p=.106)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-13372c08"><p class="cl-13371a56"><span class="cl-13346072">thickness</span></p></td>
<td class="cl-13372c09"><p class="cl-13371a60"><span class="cl-13346072">Mean ± SD</span></p></td>
<td class="cl-13372c12"><p class="cl-13371a60"><span class="cl-13346072">2.9 ± 3.0</span></p></td>
<td class="cl-13372c13"><p class="cl-13371a60"><span class="cl-13346072">1.17 (1.10-1.25, p&lt;.001)</span></p></td>
<td class="cl-13372c13"><p class="cl-13371a60"><span class="cl-13346072">1.12 (1.04-1.20, p=.004)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-13372c14"><p class="cl-13371a56"><span class="cl-13346072">ulcer</span></p></td>
<td class="cl-13372c1c"><p class="cl-13371a60"><span class="cl-13346072">Absent</span></p></td>
<td class="cl-13372c1d"><p class="cl-13371a60"><span class="cl-13346072">115 (56.1%)</span></p></td>
<td class="cl-13372c1e"><p class="cl-13371a60"><span class="cl-13346072"></span></p></td>
<td class="cl-13372c1e"><p class="cl-13371a60"><span class="cl-13346072"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-13372c26"><p class="cl-13371a56"><span class="cl-13346072"></span></p></td>
<td class="cl-13372c27"><p class="cl-13371a60"><span class="cl-13346072">Present</span></p></td>
<td class="cl-13372c30"><p class="cl-13371a60"><span class="cl-13346072">90 (43.9%)</span></p></td>
<td class="cl-13372c31"><p class="cl-13371a60"><span class="cl-13346072">4.36 (2.44-7.77, p&lt;.001)</span></p></td>
<td class="cl-13372c31"><p class="cl-13371a60"><span class="cl-13346072">3.20 (1.75-5.88, p&lt;.001)</span></p></td>
</tr>
</tbody>
<tfoot><tr style="overflow-wrap:break-word;"><td colspan="5" class="cl-13372c32"><p class="cl-13371a61"><span class="cl-1334605e">n=205, events=57, Likelihood ratio test=41.62 on 4 df(p&lt;.001)</span></p></td></tr></tfoot>
</table>
</div>
</div>
<div class="section level3">
<h3 id="competing-risk-regression">Competing risk regression<a class="anchor" aria-label="anchor" href="#competing-risk-regression"></a>
</h3>
<p>Competing-risks regression is an alternative to cox proportional
regression. It can be useful if the outcome of interest may not be able
to occur simply because something else (like death) has happened first.
For instance, in our example it is obviously not possible for a patient
to die from melanoma if they have died from another disease first. By
simply looking at cause-specific mortality (deaths from melanoma) and
considering other deaths as censored, bias may result in estimates of
the influence of predictors.</p>
<p>The approach by Fine and Gray is one option for dealing with this. It
is implemented in the package <code>cmprsk</code>. The crrFormula()
function in autoReg package can make competing risk regression model and
addFitSummary() function can add the model summary.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit1</span><span class="op">=</span><span class="fu"><a href="../reference/crrFormula.html">crrFormula</a></span><span class="op">(</span><span class="va">time</span><span class="op">+</span><span class="va">status1</span><span class="op">~</span><span class="va">age</span><span class="op">+</span><span class="va">sex</span><span class="op">+</span><span class="va">thickness</span><span class="op">+</span><span class="va">ulcer</span>,data<span class="op">=</span><span class="va">melanoma</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/autoReg.html">autoReg</a></span><span class="op">(</span><span class="va">fit</span>,uni<span class="op">=</span><span class="cn">TRUE</span>,threshold<span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/addFitSummary.html">addFitSummary</a></span><span class="op">(</span><span class="va">fit1</span>,<span class="st">"HR (competing risks multivariable)"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/myft.html">myft</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="tabwid">
<style>.cl-1398fbfe{}.cl-136eb0f6{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-136eb100{font-family:'DejaVu Sans';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-13715b8a{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-13715b94{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-13715b9e{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-13715ba8{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-13716c92{width:0.941in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716c9c{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716c9d{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716ca6{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716ca7{width:2.944in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716cb0{width:0.941in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716cb1{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716cba{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716cbb{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716cbc{width:2.944in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716cc4{width:0.941in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716cc5{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716cce{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716ccf{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716cd8{width:2.944in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716cd9{width:0.941in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716ce2{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716ce3{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716cec{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716ced{width:2.944in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716cf6{width:0.941in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716cf7{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716cf8{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716d00{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13716d01{width:2.944in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table data-quarto-disable-processing="true" class="table cl-1398fbfe">
<thead><tr style="overflow-wrap:break-word;">
<th colspan="2" class="cl-13716c92"><p class="cl-13715b8a"><span class="cl-136eb0f6">Dependent: Surv(time, status == 1)</span></p></th>
<th class="cl-13716c9d"><p class="cl-13715b8a"><span class="cl-136eb0f6">all</span></p></th>
<th class="cl-13716ca6"><p class="cl-13715b8a"><span class="cl-136eb0f6">HR (univariable)</span></p></th>
<th class="cl-13716ca6"><p class="cl-13715b8a"><span class="cl-136eb0f6">HR (multivariable)</span></p></th>
<th class="cl-13716ca7"><p class="cl-13715b8a"><span class="cl-136eb0f6">HR (competing risks multivariable)</span></p></th>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-13716cb0"><p class="cl-13715b94"><span class="cl-136eb100">age</span></p></td>
<td class="cl-13716cb1"><p class="cl-13715b9e"><span class="cl-136eb100">Mean ± SD</span></p></td>
<td class="cl-13716cba"><p class="cl-13715b9e"><span class="cl-136eb100">52.5 ± 16.7</span></p></td>
<td class="cl-13716cbb"><p class="cl-13715b9e"><span class="cl-136eb100">1.02 (1.00-1.04, p=.028)</span></p></td>
<td class="cl-13716cbb"><p class="cl-13715b9e"><span class="cl-136eb100">1.01 (1.00-1.03, p=.141)</span></p></td>
<td class="cl-13716cbc"><p class="cl-13715b9e"><span class="cl-136eb100">1.01 (0.99-1.02, p=.520)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-13716cc4"><p class="cl-13715b94"><span class="cl-136eb100">sex</span></p></td>
<td class="cl-13716cc5"><p class="cl-13715b9e"><span class="cl-136eb100">Female</span></p></td>
<td class="cl-13716cce"><p class="cl-13715b9e"><span class="cl-136eb100">126 (61.5%)</span></p></td>
<td class="cl-13716ccf"><p class="cl-13715b9e"><span class="cl-136eb100"></span></p></td>
<td class="cl-13716ccf"><p class="cl-13715b9e"><span class="cl-136eb100"></span></p></td>
<td class="cl-13716cd8"><p class="cl-13715b9e"><span class="cl-136eb100"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-13716cb0"><p class="cl-13715b94"><span class="cl-136eb100"></span></p></td>
<td class="cl-13716cb1"><p class="cl-13715b9e"><span class="cl-136eb100">Male</span></p></td>
<td class="cl-13716cba"><p class="cl-13715b9e"><span class="cl-136eb100">79 (38.5%)</span></p></td>
<td class="cl-13716cbb"><p class="cl-13715b9e"><span class="cl-136eb100">1.94 (1.15-3.26, p=.013)</span></p></td>
<td class="cl-13716cbb"><p class="cl-13715b9e"><span class="cl-136eb100">1.54 (0.91-2.60, p=.106)</span></p></td>
<td class="cl-13716cbc"><p class="cl-13715b9e"><span class="cl-136eb100">1.50 (0.87-2.57, p=.140)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-13716cb0"><p class="cl-13715b94"><span class="cl-136eb100">thickness</span></p></td>
<td class="cl-13716cb1"><p class="cl-13715b9e"><span class="cl-136eb100">Mean ± SD</span></p></td>
<td class="cl-13716cba"><p class="cl-13715b9e"><span class="cl-136eb100">2.9 ± 3.0</span></p></td>
<td class="cl-13716cbb"><p class="cl-13715b9e"><span class="cl-136eb100">1.17 (1.10-1.25, p&lt;.001)</span></p></td>
<td class="cl-13716cbb"><p class="cl-13715b9e"><span class="cl-136eb100">1.12 (1.04-1.20, p=.004)</span></p></td>
<td class="cl-13716cbc"><p class="cl-13715b9e"><span class="cl-136eb100">1.09 (1.01-1.18, p=.019)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-13716cc4"><p class="cl-13715b94"><span class="cl-136eb100">ulcer</span></p></td>
<td class="cl-13716cc5"><p class="cl-13715b9e"><span class="cl-136eb100">Absent</span></p></td>
<td class="cl-13716cce"><p class="cl-13715b9e"><span class="cl-136eb100">115 (56.1%)</span></p></td>
<td class="cl-13716ccf"><p class="cl-13715b9e"><span class="cl-136eb100"></span></p></td>
<td class="cl-13716ccf"><p class="cl-13715b9e"><span class="cl-136eb100"></span></p></td>
<td class="cl-13716cd8"><p class="cl-13715b9e"><span class="cl-136eb100"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-13716cd9"><p class="cl-13715b94"><span class="cl-136eb100"></span></p></td>
<td class="cl-13716ce2"><p class="cl-13715b9e"><span class="cl-136eb100">Present</span></p></td>
<td class="cl-13716ce3"><p class="cl-13715b9e"><span class="cl-136eb100">90 (43.9%)</span></p></td>
<td class="cl-13716cec"><p class="cl-13715b9e"><span class="cl-136eb100">4.36 (2.44-7.77, p&lt;.001)</span></p></td>
<td class="cl-13716cec"><p class="cl-13715b9e"><span class="cl-136eb100">3.20 (1.75-5.88, p&lt;.001)</span></p></td>
<td class="cl-13716ced"><p class="cl-13715b9e"><span class="cl-136eb100">3.09 (1.71-5.60, p&lt;.001)</span></p></td>
</tr>
</tbody>
<tfoot><tr style="overflow-wrap:break-word;"><td colspan="6" class="cl-13716cf6"><p class="cl-13715ba8"><span class="cl-136eb0f6">n=205, events=57, Likelihood ratio test=41.62 on 4 df(p&lt;.001)</span></p></td></tr></tfoot>
</table>
</div>
<p>You can estimate cumulative incidence functions from competing risk
data.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cmprsk) <span class="co"># for use of cuminc()</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>melanoma<span class="sc">$</span>years<span class="ot">=</span>melanoma<span class="sc">$</span>time<span class="sc">/</span><span class="dv">365</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>fit<span class="ot">=</span><span class="fu">cuminc</span>(melanoma<span class="sc">$</span>years,melanoma<span class="sc">$</span>status1)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>fit</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>Estimates and Variances<span class="sc">:</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="er">$</span>est</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>             <span class="dv">5</span>        <span class="dv">10</span>        <span class="dv">15</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">1</span> <span class="fl">0.22353960</span> <span class="fl">0.3387175</span> <span class="fl">0.3387175</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">2</span> <span class="fl">0.04419779</span> <span class="fl">0.1059471</span> <span class="fl">0.1059471</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>var</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>               <span class="dv">5</span>          <span class="dv">10</span>          <span class="dv">15</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">1</span> <span class="fl">0.0008713044</span> <span class="fl">0.001690760</span> <span class="fl">0.001690760</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">2</span> <span class="fl">0.0002086252</span> <span class="fl">0.001040155</span> <span class="fl">0.001040155</span></span></code></pre></div>
<p>At 5 years, cumulative death incidence due to melanoma is 22.3% and
cumulative death incidence due to other cause is 4.4%.</p>
<p>You can plot this with the following R code.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ggcmprsk.html">ggcmprsk</a></span><span class="op">(</span><span class="va">years</span><span class="op">+</span><span class="va">status1</span><span class="op">~</span><span class="fl">1</span>,data<span class="op">=</span><span class="va">melanoma</span>,id<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"alive"</span>,<span class="st">"melanoma"</span>,<span class="st">"others"</span><span class="op">)</span>,se<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="Survival_files/figure-html/unnamed-chunk-20-1.png" width="768"></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcmprsk</span>(years<span class="sc">+</span>status1<span class="sc">~</span>sex,<span class="at">data=</span>melanoma,<span class="at">id=</span><span class="fu">c</span>(<span class="st">"alive"</span>,<span class="st">"melanoma"</span>,<span class="st">"others"</span>),</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">strata=</span><span class="fu">c</span>(<span class="st">"female"</span>,<span class="st">"male"</span>))</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>Warning<span class="sc">:</span>  [1m [22mRemoved <span class="dv">4</span> rows containing missing <span class="fu">values</span> (<span class="st">`</span><span class="at">geom_step()</span><span class="st">`</span>).</span></code></pre></div>
<p><img src="Survival_files/figure-html/unnamed-chunk-21-1.png" width="768"></p>
</div>
</div>
<div class="section level2">
<h2 id="analysis-of-clustered-data">Analysis of clustered data<a class="anchor" aria-label="anchor" href="#analysis-of-clustered-data"></a>
</h2>
<p>In clustered data, cases are not independent. For instance, one might
be interested in survival times of individuals that are in the same
family or in the same unit, such as a town or school. In this case,
genetic or environmental factors mean that survival times within a
cluster are more similar to each other than to those from other
clusters, so that the independence assumption no longer holds. Marginal
approach and frailty model can used to handle these type of data.</p>
<div class="section level3">
<h3 id="frailty-survival-model">1. Frailty survival model<a class="anchor" aria-label="anchor" href="#frailty-survival-model"></a>
</h3>
<p>The retinopathy data is a trial of laser coagulation as a treatment
to delay diabetic retinopathy. We shall examine the effect of treatment
on time-to-blindness in patients with diabetic retinopathy, and also the
interaction of the effect of treatment(trt) with age of onset (juvenile
or adult onset), as defined by the type indicator. To estimate
individual effect, the <code>frailty(id)</code> shall be used.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(retinopathy, <span class="at">package=</span><span class="st">"survival"</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>fit<span class="ot">=</span><span class="fu">coxph</span>(<span class="fu">Surv</span>(futime,status)<span class="sc">~</span>trt<span class="sc">*</span>type<span class="sc">+</span><span class="fu">frailty</span>(id),<span class="at">data=</span>retinopathy)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>Call<span class="sc">:</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="fu">coxph</span>(<span class="at">formula =</span> <span class="fu">Surv</span>(futime, status) <span class="sc">~</span> trt <span class="sc">*</span> type <span class="sc">+</span> <span class="fu">frailty</span>(id), </span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> retinopathy)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  n<span class="ot">=</span> <span class="dv">394</span>, number of events<span class="ot">=</span> <span class="dv">155</span> </span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>              coef    <span class="fu">se</span>(coef) se2    Chisq  DF    p     </span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>trt           <span class="sc">-</span><span class="fl">0.5059</span> <span class="fl">0.2255</span>   <span class="fl">0.2207</span>   <span class="fl">5.03</span>  <span class="fl">1.00</span> <span class="fl">0.0250</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>typeadult      <span class="fl">0.3969</span> <span class="fl">0.2591</span>   <span class="fl">0.2053</span>   <span class="fl">2.35</span>  <span class="fl">1.00</span> <span class="fl">0.1300</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="fu">frailty</span>(id)                           <span class="fl">122.55</span> <span class="fl">88.58</span> <span class="fl">0.0098</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>trt<span class="sc">:</span>typeadult <span class="sc">-</span><span class="fl">0.9850</span> <span class="fl">0.3618</span>   <span class="fl">0.3553</span>   <span class="fl">7.41</span>  <span class="fl">1.00</span> <span class="fl">0.0065</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>              <span class="fu">exp</span>(coef) <span class="fu">exp</span>(<span class="sc">-</span>coef) lower .<span class="dv">95</span> upper .<span class="dv">95</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>trt              <span class="fl">0.6030</span>     <span class="fl">1.6584</span>    <span class="fl">0.3876</span>    <span class="fl">0.9380</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>typeadult        <span class="fl">1.4872</span>     <span class="fl">0.6724</span>    <span class="fl">0.8949</span>    <span class="fl">2.4714</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>trt<span class="sc">:</span>typeadult    <span class="fl">0.3734</span>     <span class="fl">2.6779</span>    <span class="fl">0.1838</span>    <span class="fl">0.7588</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>Iterations<span class="sc">:</span> <span class="dv">6</span> outer, <span class="dv">31</span> Newton<span class="sc">-</span>Raphson</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>     Variance of random effect<span class="ot">=</span> <span class="fl">0.92598</span>   I<span class="sc">-</span>likelihood <span class="ot">=</span> <span class="sc">-</span><span class="dv">847</span> </span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>Degrees of freedom <span class="cf">for</span> terms<span class="ot">=</span>  <span class="fl">1.0</span>  <span class="fl">0.6</span> <span class="fl">88.6</span>  <span class="fl">1.0</span> </span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>Concordance<span class="ot">=</span> <span class="fl">0.86</span>  (<span class="at">se =</span> <span class="fl">0.014</span> )</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>Likelihood ratio test<span class="ot">=</span> <span class="fl">218.4</span>  on <span class="fl">91.13</span> df,   p<span class="ot">=</span><span class="fl">2e-12</span></span></code></pre></div>
<p>Variance of random effect <span class="math inline">\(\hat{\sigma}^2=0.926\)</span> and the p value of
frailty(id) is 0.098. So we can reject <span class="math inline">\(H_0 :
\sigma^2=0\)</span>, that is the individual patient has different
effect.<br>
The result is summarized as table with the following R code.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/autoReg.html">autoReg</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/myft.html">myft</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="tabwid">
<style>.cl-14674c34{}.cl-146160a8{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-146160b2{font-family:'DejaVu Sans';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-1463f372{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-1463f37c{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-1463f386{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-1463f387{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-14640402{width:0.808in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1464040c{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1464040d{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1464040e{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-14640416{width:0.808in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-14640417{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-14640418{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-14640420{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-14640421{width:0.808in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-14640422{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1464042a{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1464042b{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1464042c{width:0.808in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-14640434{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-14640435{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1464043e{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1464043f{width:0.808in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-14640440{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-14640441{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-14640448{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table data-quarto-disable-processing="true" class="table cl-14674c34">
<thead><tr style="overflow-wrap:break-word;">
<th colspan="2" class="cl-14640402"><p class="cl-1463f372"><span class="cl-146160a8">Dependent: Surv(futime, status)</span></p></th>
<th class="cl-1464040d"><p class="cl-1463f372"><span class="cl-146160a8">all</span></p></th>
<th class="cl-1464040e"><p class="cl-1463f372"><span class="cl-146160a8">HR (multivariable)</span></p></th>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-14640416"><p class="cl-1463f37c"><span class="cl-146160b2">trt</span></p></td>
<td class="cl-14640417"><p class="cl-1463f386"><span class="cl-146160b2">Mean ± SD</span></p></td>
<td class="cl-14640418"><p class="cl-1463f386"><span class="cl-146160b2">0.5 ± 0.5</span></p></td>
<td class="cl-14640420"><p class="cl-1463f386"><span class="cl-146160b2">0.60 (0.39-0.94, p=.025)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-14640421"><p class="cl-1463f37c"><span class="cl-146160b2">type</span></p></td>
<td class="cl-14640422"><p class="cl-1463f386"><span class="cl-146160b2">juvenile</span></p></td>
<td class="cl-1464042a"><p class="cl-1463f386"><span class="cl-146160b2">228 (57.9%)</span></p></td>
<td class="cl-1464042b"><p class="cl-1463f386"><span class="cl-146160b2"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-14640416"><p class="cl-1463f37c"><span class="cl-146160b2"></span></p></td>
<td class="cl-14640417"><p class="cl-1463f386"><span class="cl-146160b2">adult</span></p></td>
<td class="cl-14640418"><p class="cl-1463f386"><span class="cl-146160b2">166 (42.1%)</span></p></td>
<td class="cl-14640420"><p class="cl-1463f386"><span class="cl-146160b2">1.49 (0.89-2.47, p=.126)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-14640421"><p class="cl-1463f37c"><span class="cl-146160b2">trt:type</span></p></td>
<td class="cl-14640422"><p class="cl-1463f386"><span class="cl-146160b2">juvenile</span></p></td>
<td class="cl-1464042a"><p class="cl-1463f386"><span class="cl-146160b2"></span></p></td>
<td class="cl-1464042b"><p class="cl-1463f386"><span class="cl-146160b2"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-1464042c"><p class="cl-1463f37c"><span class="cl-146160b2">trt:type</span></p></td>
<td class="cl-14640434"><p class="cl-1463f386"><span class="cl-146160b2">adult</span></p></td>
<td class="cl-14640435"><p class="cl-1463f386"><span class="cl-146160b2"></span></p></td>
<td class="cl-1464043e"><p class="cl-1463f386"><span class="cl-146160b2">0.37 (0.18-0.76, p=.006)</span></p></td>
</tr>
</tbody>
<tfoot><tr style="overflow-wrap:break-word;"><td colspan="4" class="cl-1464043f"><p class="cl-1463f387"><span class="cl-146160a8">n=394, events=155, Likelihood ratio test=218.43 on 91.1321091975791 df(p&lt;.001)</span><br><span class="cl-146160a8">frailty(id) p=.010 Variance of random effect= 0.92598   I-likelihood = -847</span></p></td></tr></tfoot>
</table>
</div>
<p>With above result, we can estimate the risk of blindness in each
group.</p>
<ul>
<li>juvenile, not treated : <span class="math inline">\(HR = exp(0) =
1\)</span>
</li>
<li>juvenile, treated : <span class="math inline">\(HR =
0.6030\)</span>
</li>
<li>adult onset, not treated : <span class="math inline">\(HR =
1.4872\)</span>
</li>
<li>adult onset, treated : <span class="math inline">\(HR =
0.6030\times1.4872\times0.3734=0.3348\)</span>
</li>
</ul>
<p>The type of diabetes is not significant on the development of
blindness(<span class="math inline">\(p=0.130\)</span>). Laser treatment
significantly reduced the risk of blindness(HR 0.60(95% CI 0.39-0.94),
<span class="math inline">\(p=0.03\)</span>). Laser treatment is
effective in both type of diabetes, but more effective in adult-onset
diabetes.</p>
</div>
<div class="section level3">
<h3 id="marginal-approach">2. Marginal approach<a class="anchor" aria-label="anchor" href="#marginal-approach"></a>
</h3>
<p>In the marginal approach, the proportional hazards assumption is
presumed to hold for all subjects, despite the structure in the data due
to clusters. With this approach, the parameter estimates are obtained
from a Cox proportional hazards model ignoring the cluster
structure.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>fit<span class="ot">=</span><span class="fu">coxph</span>(<span class="fu">Surv</span>(futime,status)<span class="sc">~</span>trt<span class="sc">*</span>type<span class="sc">+</span><span class="fu">cluster</span>(id),<span class="at">data=</span>retinopathy)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>Call<span class="sc">:</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">coxph</span>(<span class="at">formula =</span> <span class="fu">Surv</span>(futime, status) <span class="sc">~</span> trt <span class="sc">+</span> type <span class="sc">+</span> trt<span class="sc">:</span>type, </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> retinopathy, <span class="at">cluster =</span> id)</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  n<span class="ot">=</span> <span class="dv">394</span>, number of events<span class="ot">=</span> <span class="dv">155</span> </span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>                 coef <span class="fu">exp</span>(coef) <span class="fu">se</span>(coef) robust se      z <span class="fu">Pr</span>(<span class="sc">&gt;</span><span class="er">|</span>z<span class="sc">|</span>)   </span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>trt           <span class="sc">-</span><span class="fl">0.4250</span>    <span class="fl">0.6538</span>   <span class="fl">0.2177</span>    <span class="fl">0.1850</span> <span class="sc">-</span><span class="fl">2.297</span>  <span class="fl">0.02160</span> <span class="sc">*</span> </span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>typeadult      <span class="fl">0.3413</span>    <span class="fl">1.4067</span>   <span class="fl">0.1992</span>    <span class="fl">0.1958</span>  <span class="fl">1.743</span>  <span class="fl">0.08129</span> . </span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>trt<span class="sc">:</span>typeadult <span class="sc">-</span><span class="fl">0.8459</span>    <span class="fl">0.4292</span>   <span class="fl">0.3509</span>    <span class="fl">0.3036</span> <span class="sc">-</span><span class="fl">2.786</span>  <span class="fl">0.00534</span> <span class="sc">**</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>Signif. codes<span class="sc">:</span>  <span class="dv">0</span> <span class="st">'***'</span> <span class="fl">0.001</span> <span class="st">'**'</span> <span class="fl">0.01</span> <span class="st">'*'</span> <span class="fl">0.05</span> <span class="st">'.'</span> <span class="fl">0.1</span> <span class="st">' '</span> <span class="dv">1</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>              <span class="fu">exp</span>(coef) <span class="fu">exp</span>(<span class="sc">-</span>coef) lower .<span class="dv">95</span> upper .<span class="dv">95</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>trt              <span class="fl">0.6538</span>     <span class="fl">1.5296</span>    <span class="fl">0.4549</span>    <span class="fl">0.9395</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>typeadult        <span class="fl">1.4067</span>     <span class="fl">0.7109</span>    <span class="fl">0.9585</span>    <span class="fl">2.0646</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>trt<span class="sc">:</span>typeadult    <span class="fl">0.4292</span>     <span class="fl">2.3301</span>    <span class="fl">0.2367</span>    <span class="fl">0.7782</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>Concordance<span class="ot">=</span> <span class="fl">0.613</span>  (<span class="at">se =</span> <span class="fl">0.019</span> )</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>Likelihood ratio test<span class="ot">=</span> <span class="fl">28.49</span>  on <span class="dv">3</span> df,   p<span class="ot">=</span><span class="fl">3e-06</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>Wald test            <span class="ot">=</span> <span class="fl">34.88</span>  on <span class="dv">3</span> df,   p<span class="ot">=</span><span class="fl">1e-07</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a><span class="fu">Score</span> (logrank) test <span class="ot">=</span> <span class="fl">28.44</span>  on <span class="dv">3</span> df,   p<span class="ot">=</span><span class="fl">3e-06</span>,   Robust <span class="ot">=</span> <span class="fl">30.29</span>  p<span class="ot">=</span><span class="fl">1e-06</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>  (Note<span class="sc">:</span> the likelihood ratio and score tests assume independence of</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>     observations within a cluster, the Wald and robust score tests do not).</span></code></pre></div>
<p>The result can be summarized as table.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/autoReg.html">autoReg</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/myft.html">myft</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="tabwid">
<style>.cl-14994c8e{}.cl-14936f6c{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-14936f76{font-family:'DejaVu Sans';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-149603e4{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-149603ee{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-149603ef{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-149603f8{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-14961460{width:0.808in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1496146a{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1496146b{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-14961474{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 2pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-14961475{width:0.808in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1496147e{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1496147f{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-14961488{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-14961489{width:0.808in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1496148a{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-14961492{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-14961493{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-14961494{width:0.808in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1496149c{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1496149d{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1496149e{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1496149f{width:0.808in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-149614a6{width:1.063in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-149614b0{width:1.144in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-149614b1{width:2.018in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table data-quarto-disable-processing="true" class="table cl-14994c8e">
<thead><tr style="overflow-wrap:break-word;">
<th colspan="2" class="cl-14961460"><p class="cl-149603e4"><span class="cl-14936f6c">Dependent: Surv(futime, status)</span></p></th>
<th class="cl-1496146b"><p class="cl-149603e4"><span class="cl-14936f6c">all</span></p></th>
<th class="cl-14961474"><p class="cl-149603e4"><span class="cl-14936f6c">HR (multivariable)</span></p></th>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-14961475"><p class="cl-149603ee"><span class="cl-14936f76">trt</span></p></td>
<td class="cl-1496147e"><p class="cl-149603ef"><span class="cl-14936f76">Mean ± SD</span></p></td>
<td class="cl-1496147f"><p class="cl-149603ef"><span class="cl-14936f76">0.5 ± 0.5</span></p></td>
<td class="cl-14961488"><p class="cl-149603ef"><span class="cl-14936f76">0.65 (0.45-0.94, p=.022)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-14961489"><p class="cl-149603ee"><span class="cl-14936f76">type</span></p></td>
<td class="cl-1496148a"><p class="cl-149603ef"><span class="cl-14936f76">juvenile</span></p></td>
<td class="cl-14961492"><p class="cl-149603ef"><span class="cl-14936f76">228 (57.9%)</span></p></td>
<td class="cl-14961493"><p class="cl-149603ef"><span class="cl-14936f76"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-14961475"><p class="cl-149603ee"><span class="cl-14936f76"></span></p></td>
<td class="cl-1496147e"><p class="cl-149603ef"><span class="cl-14936f76">adult</span></p></td>
<td class="cl-1496147f"><p class="cl-149603ef"><span class="cl-14936f76">166 (42.1%)</span></p></td>
<td class="cl-14961488"><p class="cl-149603ef"><span class="cl-14936f76">1.41 (0.96-2.06, p=.081)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-14961489"><p class="cl-149603ee"><span class="cl-14936f76">trt:type</span></p></td>
<td class="cl-1496148a"><p class="cl-149603ef"><span class="cl-14936f76">juvenile</span></p></td>
<td class="cl-14961492"><p class="cl-149603ef"><span class="cl-14936f76"></span></p></td>
<td class="cl-14961493"><p class="cl-149603ef"><span class="cl-14936f76"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-14961494"><p class="cl-149603ee"><span class="cl-14936f76">trt:type</span></p></td>
<td class="cl-1496149c"><p class="cl-149603ef"><span class="cl-14936f76">adult</span></p></td>
<td class="cl-1496149d"><p class="cl-149603ef"><span class="cl-14936f76"></span></p></td>
<td class="cl-1496149e"><p class="cl-149603ef"><span class="cl-14936f76">0.43 (0.24-0.78, p=.005)</span></p></td>
</tr>
</tbody>
<tfoot><tr style="overflow-wrap:break-word;"><td colspan="4" class="cl-1496149f"><p class="cl-149603f8"><span class="cl-14936f6c">n=394, events=155, Likelihood ratio test=28.49 on 3 df(p&lt;.001)</span><br><span class="cl-14936f6c">cluster=id</span></p></td></tr></tfoot>
</table>
</div>
<p>The result of marginal approach is similar to frailty approach. But
in the frailty approach, subject-specific effect is estimated, whereas
in the marginal approach, population average effect is estimated.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Keon-Woong Moon.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
